<div class="flex flex-col w-full min-h-screen lg:flex-row bg-base-100">

  <!-- sidebar -->
  <div class="w-1/4 min-h-full flex flex-col justify-center items-center bg-white">
    <div class="bg-white h-20 p-4 flex justify-between items-center">
      <h2 class="text-left">Sidebar</h2>
    </div>

    <div class="drawer lg:drawer-open h-full">
      <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />
      <div class="drawer-content flex flex-col items-center justify-center">
        <!-- page content here -->
        <label for="my-drawer-2" class="btn btn-primary drawer-button lg:hidden">Open drawer</label>

      </div>

      <div class="drawer-side">
        <label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay"></label>
        <ul class="menu p-4 w-80 min-h-full bg-base-200 text-base-content items-center">

          <button (click)="clearFilters()" class="btn btn-accent">Clear Filters</button>

          <!-- dropdown menu for animal types -->
          <label for="animalTypes" class="block mb-2 text-sm font-medium text-gray-900 dark:text-black">Select an animal type</label>
          <select id="animalTypes" (change)="handleSelectChange($event)" class="p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52" disabled>
            <option selected value=""></option>
          </select>

          <label for="animalBreeds" class="block mb-2 text-sm font-medium text-gray-900 dark:text-black">Select a breed</label>
          <select id="animalBreeds" (change)="handleSelectChange($event)" class="p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52" disabled>
            <option selected value=""></option>
          </select>

          <label for="animalWeights" class="block mb-2 text-sm font-medium text-gray-900 dark:text-black">Select a weight</label>
          <select id="animalWeights" (change)="handleSelectChange($event)" class="p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52" disabled>
            <option selected value=""></option>
          </select>

        </ul>

      </div>
    </div>

  </div>

  <!-- divider between side bar and main content-->
  <div class="divider lg:divider-horizontal"></div>

  <!-- main content -->
  <div class="container">

    <!-- TOP BAR -->
    <div class="bg-white p-4 flex justify-between items-center">
      <div class="w-1/3 justify-center">
        <h2 class="text-left">Explore Page - {{currentPage}} </h2>
      </div>

      <div class="w-2/3 flex justify-end items-center">
        <div class="flex space-x-4">
          <button class="btn btn-secondary" onclick="my_modal_5.showModal();" (click)="generateUUID();">
            Create
          </button>

          <dialog id="my_modal_5" class="modal modal-bottom sm:modal-middle">
            <div class="modal-box w-50 h-50 overflow-auto justify-center items-center">
              <div class="modal-action flex flex-col">

                <button class="absolute top-0 right-0 mr-2 mt-2 btn btn-accent max-w-xs" onclick="my_modal_5.close()" (click)="this.closeAnimalModal();">Close</button>

                <form class="flex flex-col justify-center items-center" method="dialog" [formGroup]="animalCreateForm">

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Animal ID</span>
                    </div>
                    <input type="text" formControlName="animalId" class="input input-bordered w-full max-w-xs" [disabled]="true" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Owner</span>
                    </div>
                    <input type="text" formControlName="owner" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Animal Type</span>
                    </div>
                    <input type="text" formControlName="animalType" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Animal Breed</span>
                    </div>
                    <input type="text" formControlName="animalBreed" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Animal Name</span>
                    </div>
                    <input type="text" formControlName="animalName" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Animal Weight</span>
                    </div>
                    <input type="text" formControlName="animalWeight" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Animal Sex</span>
                    </div>
                    <input type="text" formControlName="animalSex" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Temperament</span>
                    </div>
                    <input type="text" formControlName="temperament" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">About</span>
                    </div>
                    <input type="text" formControlName="about" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Images</span>
                    </div>
                    <input type="text" formControlName="images" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Primary Image</span>
                    </div>
                    <input type="text" formControlName="primaryImage" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Location</span>
                    </div>
                    <input type="text" formControlName="location" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Zip Code</span>
                    </div>
                    <input type="text" formControlName="zipCode" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Adoption Status</span>
                    </div>
                    <input type="text" formControlName="adoptionStatus" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Date Of Birth</span>
                    </div>
                    <input type="date" formControlName="dateOfBirth" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Color</span>
                    </div>
                    <input type="text" formControlName="color" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <label class="form-control w-full max-w-xs">
                    <div class="label">
                      <span class="label-text">Vaccination Status</span>
                    </div>
                    <input type="text" formControlName="vaccinationStatus" class="input input-bordered w-full max-w-xs" />
                  </label>

                  <div class="flex flex-row p-6 justify-center items-center">
                    <button type="submit" class="btn btn-primary" (click)="addAnimalToCollection();">Submit</button>
                  </div>

                </form>
              </div>
            </div>
          </dialog>
          <input type="text" id="search" name="search" placeholder="Search..." class="py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" (keyup)="searchFunction($event)">
          <button type="submit" class="btn btn-primary">Search</button>
        </div>
      </div>
    </div>

    <div class="flex flex-wrap justify-around items-center">
      <div *ngFor="let animal of getDisplayedCards()" class="w-64 h-auto rounded overflow-auto shadow-lg m-4 relative">

        <img class="w-64 h-48 object-cover" [src]="animal.images[animal.primaryImage]" alt="Animal image">
        <div class="px-6 py-4">

          <div class="font-bold text-xl mb-2">{{ animal.animalName }}</div>

          <p class="text-gray-700 text-base animal-info">
            Owner: {{ animal.owner }} Type: {{ animal.animalType }} Breed: {{ animal.animalBreed ? animal.animalBreed.join(', ') : '' }} Weight: {{ animal.animalWeight }} Sex: {{ animal.animalSex }} Temperament: {{ animal.temperament ? animal.temperament.join(', ') : '' }} About: {{ animal.about }} Location: {{ animal.location }} Zip Code: {{ animal.zipCode }} Adoption Status: {{ animal.adoptionStatus }} Date Of Birth: {{ animal.dateOfBirth }} Color: {{ animal.color }} Vaccination Status: {{ animal.vaccinationStatus }}
          </p>

          <!-- Dropdown Menu -->
          <div class="dropdown absolute right-0 top-0">
            <div tabindex="0" role="button" class="btn mt-1 mr-1" (click)="toggleDropdown()">&#x22EE;</div>
            <ul *ngIf="dropdownVisible" class="dropdown-content z-[20] menu p-2 shadow bg-base-100 rounded-box w-52">
              <div class="edit-button items-center justify-center">
                <button class="btn btn-ghost w-full text-center" onclick=" my_modal_5.showModal();" (click)="editAnimal(animal); toggleDropdown();">Edit</button>
              </div>

              <div class="edit-button items-center justify-center">
                <button class="btn btn-ghost w-full text-center" (click)="deleteAnimalFromCollection(animal); toggleDropdown();">Delete</button>
              </div>
            </ul>
          </div>

        </div>
      </div>
    </div>



    <!-- BUTTONS FOR NAVIGATION-->
    <div class="join bg-white p-4 flex justify-between items-center">
      <button class="join-item btn" (click)="previousPage()" [disabled]="currentPage === 1">«</button>
      <div class="flex overflow-ellipsis">
        <button class="join-item btn" *ngFor="let page of getVisiblePages()" [disabled]="currentPage === page" (click)="goToPage(page)">{{page}}</button>
      </div>
      <button class="join-item btn" (click)="nextPage()" [disabled]="currentPage === gettotalPages()">»</button>
    </div>


  </div>

</div>
