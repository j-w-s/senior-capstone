<div class="flex-grow flex flex-col w-full max-h-screen min-w-screen lg:flex-row bg-base-100 p-0 m-0">

  <!-- Main Content Area -->
  <div class="w-full h-dvh flex flex-col bg-base-200">
    <div class="flex justify-between items-center p-4 h-1/8 w-full bg-white">
      <div class="flex justify-between items-center w-1/2">
        <h2 class="text-left justify-between w-full flex items-center gap-4 p-4">Document Editor</h2>
      </div>
    </div>

    <div class="w-full h-6/8 flex flex-row bg-base-200 p-4 justify-center items-center">
      <!-- Section to display received application templates -->
      <div class="flex flex-col w-50dvw h-50dvh bg-white mx-2 my-2">
        <section *ngIf="pageIndex == 0">
          <section *ngIf="receivedTemplates != []">
            <h2>Document Templates Sent To You:</h2>
            <div>
              <div class="carousel rounded-box bg-accent w-full min-h-[20vh]">
                <div class="carousel-item w-1/4 h-full mx-2">
                  <div class="card m-2 w-full h-[20vh] bg-base-100 shadow-xl" *ngFor="let template of receivedTemplates">
                    <div class="card-body">
                      <h2 class="card-title truncate">{{ template.templateName }}</h2>
                      <p class="truncate-2-lines">{{ template.templateDescription }}</p>
                      <div class="card-actions justify-end">
                        <button class="btn btn-primary" (click)="generateDocumentFromTemplate(template)">Start Filling Out Template!</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Section to display documents being worked on -->
          <section *ngIf="workingDocs != []">
            <h2>Your Documents Being Worked On:</h2>
            <div>
              <div class="carousel rounded-box bg-accent w-full min-h-[20vh]">
                <div class="carousel-item w-1/4 h-full mx-2" *ngFor="let doc of workingDocs">
                  <div class="card m-2 w-full h-[20vh] bg-base-100 shadow-xl">
                    <div class="card-body">
                      <h2 class="card-title truncate">{{ doc.documentName }}</h2>
                      <p class="truncate-2-lines">{{ doc.documentDescription }}</p>
                      <div class="card-actions justify-end">
                        <button class="btn btn-primary" (click)="viewDoc(doc, 1)">Continue Working!</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Section to display sent application documents -->
          <section *ngIf="sentDocs != []">
            <h2>Submitted Documents:</h2>
            <div>
              <div class="carousel rounded-box bg-accent w-full min-h-[20vh]">
                <div class="carousel-item w-1/4 h-full mx-2" *ngFor="let doc of sentDocs">
                  <div class="card m-2 w-full h-[20vh] bg-base-100 shadow-xl">
                    <div class="card-body">
                      <h2 class="card-title truncate">{{ doc.documentName }}</h2>
                      <p class="truncate-2-lines">{{ doc.documentDescription }}</p>
                      <div class="card-actions justify-end">
                        <button class="btn btn-primary" (click)="viewDoc(doc, 2)">View!</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </section>

        <!-- Section to edit the selected document -->
        <section *ngIf="pageIndex == 1" class="bg-white p-4">
          <button class="btn btn-neutral mb-4" (click)="updatePageIndex(0)">Back</button>
          <h2 class="text-2xl font-bold mb-4">Editing Document: {{ selectedDocument.documentName }}</h2>
          <form>
            <div *ngFor="let field of selectedDocument.fields" class="mb-4">
              <label class="block mt-4 text-sm font-medium text-text-black">{{ field.name }}</label>
              <input [type]="field.type" [(ngModel)]="field.value" name="{{ field.name }}" class="mt-2 block w-full p-2 border border-black rounded-md shadow-sm focus:outline-none focus:ring-bg-primary focus:border-bg-primary sm:text-sm">
            </div>
            <div class="flex justify-between items-center m-2">
              <button class="btn btn-secondary" type="submit" (click)="updateDocument(selectedDocument)">Save Document</button>
              <button class="btn btn-secondary ml-2" type="submit" (click)="submitDocumentToSender(selectedDocument)">Submit Document</button>
            </div>
          </form>
        </section>


        <!-- Section To Review Submitted Documents -->
        <section *ngIf="pageIndex == 2" class="bg-white p-4">
          <button class="btn btn-neutral mb-4" (click)="updatePageIndex(0)">Back</button>
          <h2 class="text-2xl font-bold mb-4">Viewing Submitted Document: {{ selectedDocument.documentName }}</h2>
          <form>
            <div *ngFor="let field of selectedDocument.fields" class="mb-4">
              <label class="block mt-4 text-sm font-medium text-text-black">{{ field.name }}</label>
              <input disabled [type]="field.type" [(ngModel)]="field.value" name="{{ field.name }}" class="mt-2 block w-full p-2 border border-black rounded-md shadow-sm focus:outline-none focus:ring-bg-primary focus:border-bg-primary sm:text-sm">
            </div>
          </form>
        </section>
      </div>
    </div>

  </div>
</div>
